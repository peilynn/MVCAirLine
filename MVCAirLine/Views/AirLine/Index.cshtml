
@{
	ViewBag.Title = "Index";
}
<div class="flexslider" style="position:relative;display:block;width:1280px" >
	<div class="main-agileinfo" style=" position:relative;top: 350px;left:0px;width:970px">
		<div class="sap_tabs" >
			<div id="horizontalTab">
				<ul class="resp-tabs-list" style=" position:relative;top:-150px;z-index:500;width:970px">
					<li class="resp-tab-item"><span>來回程</span></li>
					<li class="resp-tab-item"><span>單程</span></li>
					<!--<li class="resp-tab-item"><span>Multi city</span></li>-->
				</ul>
				<div class="clearfix"> </div>
				<div class="resp-tabs-container">
					<div class="tab-1 resp-tab-content roundtrip">
						<form class="form" action="~/Airline/RequestAirLineDetailAsync" method="get" style="top:-80px" id="form1">
							<div class="from" style="position:relative;z-index:200">
								<h3>出發地</h3>
								<input id="DepartureCitytxt" style="position:relative;z-index:100" type="text" name="DepartCity" class="city1" placeholder="出發地關鍵字" required="">
								<ul id="ulID"></ul>
							</div>
							<div class="to">
								<h3>目的地</h3>
								<input id="DestinationCitytxt" style="position:relative;z-index:100" type="text" name="ArrivalCity" class="city2" placeholder="目的地關鍵字" required="">
								<ul id="ulID2"></ul>
							</div>
							<!--<div class="clear" style="position:relative;z-index:5"></div>-->
							<div class="date" style="position:absolute;top:110px;left:25px">
								<div class="depart">
									<h3>出發時間</h3>
									<input id="datepicker" name="GoDate" type="text" value="mm/dd/yyyy" onfocus="this.value = '';" onblur="if (this.value == '') {this.value = 'mm/dd/yyyy';}" required="">
									<!--<span class="checkbox1">
					<label class="checkbox"><input type="checkbox" name="" checked=""><i> </i>Flexible with date</label>
				</span>-->
								</div>
								<div class="return">
									<h3>回程時間</h3>
									<input id="datepicker1" name="BackDate" type="text" value="mm/dd/yyyy" onfocus="this.value = '';" onblur="if (this.value == '') {this.value = 'mm/dd/yyyy';}" required="">
									<!--<span class="checkbox1">
					<label class="checkbox"><input type="checkbox" name="" checked=""><i> </i>Flexible with date</label>
				</span>-->
								</div>
								<div class="clear"></div>
							</div>
							<div class="class" style="position:absolute;top:110px;left:500px">
								<h3>艙等</h3>
								<select id="w3_country1" name="Cabin" onchange="change_country(this.value)" class="frm-field required">
									<option value="5">經濟艙</option>
									<option value="4">豪華經濟艙</option>
									<option value="3">商務艙</option>
									<option value="1">頭等艙</option>
								</select>

							</div>
							<div class="clear"></div>
							<div class="numofppl" style="position:absolute;top:200px;left:25px">
								<div class="adults">
									<h3>成人:(12歲以上)</h3>
									<div class="quantity">
										<div class="quantity-select">
											<div class="entry value-minus">&nbsp;</div>
											<div class="entry value" id="adultdiv"><span>0</span></div>
											<div class="entry value-plus active">&nbsp;</div>
											<input id="Adultcountinput" type="hidden" name="AdultCount" required />
										</div>
									</div>
								</div>
								<div class="child">
									<h3>孩童:2-11 歲</h3>
									<div class="quantity">
										<div class="quantity-select">
											<div class="entry value-minus">&nbsp;</div>
											<div class="entry value" id="childdiv"><span>0</span></div>
											<div class="entry value-plus active">&nbsp;</div>
											<input id="childcountinput" type="hidden" name="ChildCount" required />
										</div>
									</div>
								</div>
								<div class="clear"></div>
							</div>
							<div class="clear"></div>
							<input type="submit" value="查詢航班" style="position:absolute;top:250px;left:25px">
						</form>

					</div>
					<div class="tab-1 resp-tab-content oneway">
						<form class="form" action="#" method="post" style="top:-80px">
							<div class="from" style="position:relative;z-index:200">
								<h3>From</h3>
								<input type="text" id="DepartureCitytxt2" name="city" class="city1" placeholder="Type Departure City" required="" style="position:relative;z-index:100">
								<ul id="ulID3"></ul>
							</div>
							<div class="to">
								<h3>To</h3>
								<input type="text" id="DestinationCitytxt2" name="city" class="city2" placeholder="Type Destination City" required="" style="position:relative;z-index:100">
								<ul id="ulID4"></ul>
							</div>
							<div class="clear"></div>
							<div class="date" style="position:absolute;top:110px;left:25px">
								<div class="depart">
									<h3>Depart</h3>
									<input class="date" id="datepicker2" name="Text" type="text" value="mm/dd/yyyy" onfocus="this.value = '';" onblur="if (this.value == '') {this.value = 'mm/dd/yyyy';}" required="">
									<!--<span class="checkbox1">
							<label class="checkbox"><input type="checkbox" name="" checked=""><i> </i>Flexible with date</label>
						</span>-->
								</div>
							</div>
							<div class="class" style="position:absolute;top:110px;left:500px">
								<h3>Class</h3>
								<select id="w3_country1" onchange="change_country(this.value)" class="frm-field required">
									<option value="null">Economy</option>
									<option value="null">Premium Economy</option>
									<option value="null">Business</option>
									<option value="null">First class</option>
								</select>

							</div>
							<div class="clear"></div>
							<div class="numofppl" style="position:absolute;top:200px;left:25px">
								<div class="adults">
									<h3>Adult:(12+ yrs)</h3>
									<div class="quantity">
										<div class="quantity-select">
											<div class="entry value-minus">&nbsp;</div>
											<div class="entry value"><span>0</span></div>
											<div class="entry value-plus active">&nbsp;</div>
										</div>
									</div>
								</div>
								<div class="child">
									<h3>Child:(2-11 yrs)</h3>
									<div class="quantity">
										<div class="quantity-select">
											<div class="entry value-minus">&nbsp;</div>
											<div class="entry value"><span>0</span></div>
											<div class="entry value-plus active">&nbsp;</div>
										</div>
									</div>
								</div>
								<div class="clear"></div>
							</div>
							<div class="clear"></div>
							<input type="submit" id="FlightForm2" value="Search Flights" style="position:absolute;top:250px;left:25px">
						</form>

					</div>
					<div class="tab-1 resp-tab-content multicity">

						<form class="form" action="#" method="post">
							<div class="from">
								<h3>From</h3>
								<input type="text" name="city" class="city1" placeholder="Type Departure City" required="">

							</div>
							<div class="to">
								<h3>To</h3>
								<input type="text" name="city" class="city2" placeholder="Type Destination City" required="">
							</div>
							<div class="clear"></div>
							<div class="date">
								<div class="depart">
									<h3>Depart</h3>
									<input class="date" id="datepicker3" name="Text" type="text" value="mm/dd/yyyy" onfocus="this.value = '';" onblur="if (this.value == '') {this.value = 'mm/dd/yyyy';}" required="">

									<!--<span class="checkbox1">
							<label class="checkbox"><input type="checkbox" name="" checked=""><i> </i>Flexible with date</label>
						</span>-->
								</div>
							</div>
							<div class="class">
								<h3>Class</h3>
								<select id="w3_country1" onchange="change_country(this.value)" class="frm-field required">
									<option value="null">Economy</option>
									<option value="null">Premium Economy</option>
									<option value="null">Business</option>
									<option value="null">First class</option>
								</select>
							</div>
							<div class="clear"></div>
							<div id="loadMore">Add City+</div>
							<div id="showLess">Remove</div>
						</form>
						<div class="load_more">
							<ul id="myList">
								<li>

									<div class="l_g spcl">
										<form class="form" action="#" method="post">
											<!--class="blackbg"-->
											<div class="from">
												<h3>From</h3>
												<input type="text" name="city" class="city1" placeholder="Type Departure City" required="">

											</div>
											<div class="to">
												<h3>To</h3>
												<input type="text" name="city" class="city2" placeholder="Type Destination City" required="">

											</div>
											<div class="clear"></div>
											<div class="date">
												<div class="depart">
													<h3>Depart</h3>
													<input class="date" id="datepicker" name="Text" type="text" value="mm/dd/yyyy" onfocus="this.value = '';" onblur="if (this.value == '') {this.value = 'mm/dd/yyyy';}" required="">
													<span class="checkbox1">
														<label class="checkbox"><input type="checkbox" name="" checked=""><i> </i>Flexible with date</label>
													</span>
												</div>
											</div>
											<div class="clear"></div>
										</form>

									</div>

								</li>
								<form class="form" action="#" method="post">
									<div class="numofppl">
										<div class="adults">
											<h3>Adult:(12+ yrs)</h3>
											<div class="quantity">
												<div class="quantity-select">
													<div class="entry value-minus">&nbsp;</div>
													<div class="entry value"><span>0</span></div>
													<div class="entry value-plus active">&nbsp;</div>
												</div>
											</div>
										</div>
										<div class="child">
											<h3>Child:(2-11 yrs)</h3>
											<div class="quantity">
												<div class="quantity-select">
													<div class="entry value-minus">&nbsp;</div>
													<div class="entry value"><span>0</span></div>
													<div class="entry value-plus active">&nbsp;</div>
												</div>
											</div>
										</div>
										<div class="clear"></div>
									</div>
									<div class="clear"></div>
									<input type="submit" value="Search Flights">
								</form>
							</ul>
						</div>
					</div>

				</div>
			</div>
		</div>
	</div>
		
		<ul class="slides">
			<li >
				<div class="overlay"></div>
				<img src="~/images/templatemo_slide_5.jpg" alt="Special 1">

				<!--<div class="container">
				<div class="row">
					<div class="col-md-5 col-lg-4">
						<div class="flex-caption visible-lg">
							<span class="price">$7,500</span>
							<h3 class="title">Venice, Italy</h3>
							<p>
								Travel is a responsive Bootstrap layout from
								<span class="blue">template</span><span class="green">mo</span> website.
								All images used in this template are from
								<a rel="nofollow" href="http://unsplash.com" target="_parent">Unsplash</a>.
							</p>
							<a href="#" class="slider-btn">Pre-booking</a>
						</div>
					</div>
				</div>
			</div>-->
			</li>
			<li >
				<div class="overlay"></div>
				<img src="~/images/templatemo_slide_2.jpg" alt="Special 2">
				<!--<div class="container">
				<div class="row">
					<div class="col-md-5 col-lg-4">
						<div class="flex-caption visible-lg">
							<span class="price">$12,400</span>
							<h3 class="title">Bercelona, Spain</h3>
							<p>You may visit <a href="http://tourkrub.co" target="_parent">Tour Krub</a> for Thai Tour Packages. Duis fermentum nibh sit amet felis mattis, eu convallis risus egestas.</p>
							<a href="#" class="slider-btn">Reserve Now</a>
						</div>
					</div>
				</div>
			</div>-->
			</li>
			<li >
				<div class="overlay"></div>
				<img src="~/images/templatemo_slide_3.jpg" alt="Special 3">
				<!--<div class="container">
				<div class="row">
					<div class="col-md-5 col-lg-4">
						<div class="flex-caption visible-lg">
							<span class="price">$20,800</span>
							<h3 class="title">Basel, Switzerland</h3>
							<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis fermentum nibh sit amet felis mattis, eu convallis risus egestas.</p>
							<a href="#" class="slider-btn">Book Now</a>
						</div>
					</div>
				</div>
			</div>-->
			</li>
			<!--<li>
			<div class="overlay"></div>
			<img src="images/templatemo_slide_4.jpg" alt="Special 4s">
			<div class="container">
				<div class="row">
					<div class="col-md-5 col-lg-4">
						<div class="flex-caption visible-lg">
							<span class="price">$20,800</span>
							<h3 class="title">Basel, Switzerland</h3>
							<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis fermentum nibh sit amet felis mattis, eu convallis risus egestas.</p>
							<a href="#" class="slider-btn">Book Now</a>
						</div>
					</div>
				</div>
			</div>
		</li>-->

		</ul>


</div> <!-- /.flexslider -->
<script>
	document.querySelector("#DepartureCitytxt").addEventListener("keyup", function () {
		var xhr = new XMLHttpRequest();
		xhr.open("get", "http://localhost:50678/CountryHandler.ashx?cityname=" + this.value);
		xhr.send();

		xhr.addEventListener("load", function () {

			if (xhr.status == 200) {
				var message = xhr.responseText;
				var JSP = JSON.parse(message);
				var Docfrag = document.createDocumentFragment();
				var txt = document.querySelector("#DepartureCitytxt");
				var theUi = document.querySelector("#ulID");
				theUi.style.display = "block";
				for (var i = 0; i <= JSP.length - 1; i++) {
					var eleli = document.createElement("li");
					var eletxt = document.createTextNode(JSP[i]);
					eleli.style.backgroundColor = "white";
					
					eleli.appendChild(eletxt);

					eleli.addEventListener("mouseover", function () {
						this.style.backgroundColor = "yellow";
					})
					eleli.addEventListener("mouseout", function () {
						this.style.backgroundColor = "white";

					})
					eleli.addEventListener("click", function () {
						txt.value = this.firstChild.nodeValue;
						theUi.style.display = "none";

					})

					Docfrag.appendChild(eleli);
				}

				while (theUi.hasChildNodes()) {
					theUi.removeChild(theUi.lastChild);
				}


				theUi.appendChild(Docfrag);
			}
		})

	})

	document.querySelector("#DestinationCitytxt").addEventListener("keyup", function () {
		var xhr = new XMLHttpRequest();
		xhr.open("get", "http://localhost:50678/CountryHandler.ashx?cityname=" + this.value);
		xhr.send();

		xhr.addEventListener("load", function () {

			if (xhr.status == 200) {
				var message = xhr.responseText;
				var JSP = JSON.parse(message);
				var Docfrag = document.createDocumentFragment();
				var txt = document.querySelector("#DestinationCitytxt");
				var theUi = document.querySelector("#ulID2");
				theUi.style.display = "block";
				for (var i = 0; i <= JSP.length - 1; i++) {
					var eleli = document.createElement("li");
					var eletxt = document.createTextNode(JSP[i]);
					eleli.style.backgroundColor = "white";
					eleli.appendChild(eletxt);

					eleli.addEventListener("mouseover", function () {
						this.style.backgroundColor = "yellow";
					})
					eleli.addEventListener("mouseout", function () {
						this.style.backgroundColor = "white";

					})
					eleli.addEventListener("click", function () {
						txt.value = this.firstChild.nodeValue;
						theUi.style.display = "none";

					})

					Docfrag.appendChild(eleli);
				}

				while (theUi.hasChildNodes()) {
					theUi.removeChild(theUi.lastChild);
				}


				theUi.appendChild(Docfrag);
			}
		})

	})

	document.querySelector("#DepartureCitytxt2").addEventListener("keyup", function () {
		var xhr = new XMLHttpRequest();
		xhr.open("get", "http://localhost:50678/CountryHandler.ashx?cityname=" + this.value);
		xhr.send();

		xhr.addEventListener("load", function () {

			if (xhr.status == 200) {
				var message = xhr.responseText;
				var JSP = JSON.parse(message);
				var Docfrag = document.createDocumentFragment();
				var txt = document.querySelector("#DepartureCitytxt2");
				var theUi = document.querySelector("#ulID3");
				theUi.style.display = "block";
				for (var i = 0; i <= JSP.length - 1; i++) {
					var eleli = document.createElement("li");
					var eletxt = document.createTextNode(JSP[i]);
					eleli.style.backgroundColor = "white";
					eleli.appendChild(eletxt);

					eleli.addEventListener("mouseover", function () {
						this.style.backgroundColor = "yellow";
					})
					eleli.addEventListener("mouseout", function () {
						this.style.backgroundColor = "white";

					})
					eleli.addEventListener("click", function () {
						txt.value = this.firstChild.nodeValue;
						theUi.style.display = "none";

					})

					Docfrag.appendChild(eleli);
				}

				while (theUi.hasChildNodes()) {
					theUi.removeChild(theUi.lastChild);
				}


				theUi.appendChild(Docfrag);
			}
		})

	})




	document.querySelector("#DestinationCitytxt2").addEventListener("keyup", function () {
		var xhr = new XMLHttpRequest();
		xhr.open("get", "http://localhost:50678/CountryHandler.ashx?cityname=" + this.value);
		xhr.send();

		xhr.addEventListener("load", function () {

			if (xhr.status == 200) {
				var message = xhr.responseText;
				var JSP = JSON.parse(message);
				var Docfrag = document.createDocumentFragment();
				var txt = document.querySelector("#DestinationCitytxt2");
				var theUi = document.querySelector("#ulID4");
				theUi.style.display = "block";
				for (var i = 0; i <= JSP.length - 1; i++) {
					var eleli = document.createElement("li");
					var eletxt = document.createTextNode(JSP[i]);
					eleli.style.backgroundColor = "white";
					eleli.appendChild(eletxt);

					eleli.addEventListener("mouseover", function () {
						this.style.backgroundColor = "yellow";
					})
					eleli.addEventListener("mouseout", function () {
						this.style.backgroundColor = "white";

					})
					eleli.addEventListener("click", function () {
						txt.value = this.firstChild.nodeValue;
						theUi.style.display = "none";

					})

					Docfrag.appendChild(eleli);
				}

				while (theUi.hasChildNodes()) {
					theUi.removeChild(theUi.lastChild);
				}


				theUi.appendChild(Docfrag);
			}
		})

	})


	//Mutation Observer API start

	function mutate(mutations) {
		var getvalue = mutations[1].target.innerText;
		console.log(getvalue);
		document.querySelector('#childcountinput').value = getvalue;
		//mutations.forEach(function (mutation) {
		//	console.log(mutation);
		//});
	}


	var target = document.querySelector('#childdiv');
	var observer = new MutationObserver(mutate);
	var config = { characterData: false, attributes: false, childList: true, subtree: false };

	observer.observe(target, config);


	function mutate1(mutations) {
		var getvalue = mutations[1].target.innerText;
		console.log(getvalue);
		document.querySelector('#Adultcountinput').value = getvalue;
		//mutations.forEach(function (mutation) {
		//	console.log(mutation);
		//});
	}


	var target2 = document.querySelector('#adultdiv');
	var observer2 = new MutationObserver(mutate1);
	var config2 = { characterData: false, attributes: false, childList: true, subtree: false };

	observer2.observe(target2, config2);

			//Mutation Observer API end







</script>
